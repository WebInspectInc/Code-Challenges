pico-8 cartridge // http://www.pico-8.com
version 16
__lua__

player = {
	s=1,
	x=0,
	y=0,
	spd=2
}

g = {
	cam={
		x=0,y=0
	}
}

function _init()
	--g.update_cam = position_locking
 --g.update_cam = camera_window
	g.update_cam = position_snapping
end

function _update()

	if btn(0) then player.x -= player.spd end
	if btn(1) then player.x += player.spd end
	if btn(2) then player.y -= player.spd end
	if btn(3) then player.y += player.spd end

	g.update_cam()
end


function _draw()
	cls()
	camera(g.cam.x,g.cam.y)
	map(0,0,0,0,32,32)
	
	spr(player.s,player.x,player.y)
end


function position_locking()
	g.cam.x = player.x - 60
	g.cam.y = player.y - 60
end

function camera_window()
	local buffer = 24
	if (player.x < g.cam.x + buffer) then
		g.cam.x = player.x - buffer
	elseif (player.x > g.cam.x + 128 - buffer) then
		g.cam.x = player.x + buffer - 128
	elseif (player.y < g.cam.y + buffer) then
		g.cam.y = player.y - buffer
	elseif (player.y > g.cam.y + 128 - buffer) then
		g.cam.y = player.y + buffer - 128
	end
end


function position_snapping()
	g.cam.x = player.x - 60
	
	if (player.y < g.cam.y + 16) then
		g.cam.y = player.y - 16
	elseif (player.y > g.cam.y + 128 - 16) then
		g.cam.y = player.y + 16 - 128
	end
	
	if (player.y - g.cam.y < 60) then
		g.cam.y -= 1
	elseif (player.y - g.cam.y > 60) then
		g.cam.y += 1
	end
end


__gfx__
00000000ccccccccffffffff77777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000ccccccccffffffff77777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700ccccccccffffffff77777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000ccccccccffffffff77777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000ccccccccffffffff77777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700ccccccccffffffff77777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000ccccccccffffffff77777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000ccccccccffffffff77777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0203020302030203020302030203020302030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0302030203020302030203020302030203020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0203020302030203020302030203020302030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0302030203020302030203020302030203020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0203020302030203020302030203020302030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0302030203020302030203020302030203020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0203020302030203020302030203020302030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0302030203020302030203020302030203020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0203020302030203020302030203020302030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0302030203020302030203020302030203020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0203020302030203020302030203020302030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0302030203020302030203020302030203020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0203020302030203020302030203020302030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0302030203020302030203020302030203020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0203020302030203020302030203020302030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0302030203020302030203020302030203020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0203020302030203020302030203020302030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0302030203020302030203020302030203020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
